import{_ as me}from"./SOohJPuW.js";import{_ as pe}from"./CNvrXMO9.js";import{_ as he}from"./D8SE-IQr.js";import{U as ye,_ as ge,V as ve,Z as fe,$ as be,aJ as we,a0 as ke,i as f,j,k as Te,l as Ce,aE as U,o as a,c as o,a as d,d as N,W as e,f as S,u as I,x as G,a9 as xe,av as $e,aC as Ne,aF as Se,a3 as Ie,n as E,t as c,b as m,aG as Ee,F as k,r as K,K as L,aM as Le,ah as Pe,ai as Ve,aN as z,bp as Be,a4 as Ae,a5 as Fe}from"./DSD2pUNw.js";import{_ as Oe}from"./CKIiqM3i.js";import{u as De}from"./BLR1aNLP.js";import{g as H}from"./DiADfKRX.js";const Me={1:"live-games",2:"games-id",3:"virtual-sport-id",4:"tv-games-id",5:"poker-id",6:"sportbook-id",7:"special-games-id",8:"table-games-id"},Re=b=>(Pe("data-v-fe16bbd9"),b=b(),Ve(),b),je={class:"ng-leader-board"},Ue={class:"board"},Ge={key:1,class:"board-wrapper ng-flex-center"},Ke={class:"board-table"},ze={class:"tw-flex tw-items-center"},He={key:0,class:"ng-flex-center"},Je={key:1,class:"ng-flex-center"},We={key:2,class:"ng-flex-center"},Ye={key:3,class:"ng-flex-center"},Ze={class:"tw-flex tw-justify-end"},qe=["onClick"],Qe=["src"],Xe={class:"tw-text-ellipsis tw-overflow-hidden tw-whitespace-nowrap"},et={key:0,class:"ng-flex-center"},tt=["onClick"],st=["data-tooltip"],at=["onClick"],ot={key:1,class:"ng-flex-center"},nt={key:0},rt={key:1},ct={key:2,class:"tw-flex tw-justify-end"},it=["src"],lt={key:3,class:"ng-flex-center"},dt=["onClick"],ut=["src"],_t=Re(()=>d("div",{class:"board-shadow"},null,-1)),J=12,mt=ye({__name:"LeaderBoard",emits:["profile-active","bet-active"],setup(b,{emit:W}){const Y=W,Z=ge(),P=ve(),{platformCommasFormat:T}=De(),C=["6ed534e6-fe06-428f-b15f-e769cbbfe1c4","45cab422-ae18-45d9-acde-e0ddead0091a"],{t:n}=fe(),{$echo:V}=xe(),{public:{PLATFORM_ID:B}}=$e(),q=be(),Q=we(),{setAnotherUser:X,setBetInfo:ee,openModal:A}=Q,{isLessContainerTablet:i,isLeaderboardAlternativeTime:te}=ke(q),g=[{key:"casino",label:n("casino_bets"),icon:"casino"},{key:"high-rollers",label:n("high-rollers_bets"),icon:"crash"},{key:"rare-wins",label:n("rare-wins_bets"),icon:"special"}],x=f(!0),u=f(g[0].key),F=f(new Date),p=f({casino:[],"high-rollers":[],"rare-wins":[]}),O=f(void 0),D=j({get:()=>g.find(({key:t})=>t===u.value)??g[0],set:t=>{u.value=t}}),se=j(()=>({second:n("seconds_s"),minute:n("minutes_m"),hour:n("hours_h"),day:n("days_d")})),ae=t=>{u.value=t},oe=async()=>{x.value=!0;try{const{data:t}=await Ne.casino.getNewTransactions();p.value=t,O.value=window.setInterval(()=>{F.value=new Date},1e3)}catch(t){console.error("Error in LeaderBoard.vue -> getNewTransactions:",t)}finally{x.value=!1}},ne=t=>"/img/categories/"+t.game_category.toLowerCase().replace(/\s+|-/g,"_")+".svg",re=t=>{let l;const _=Me[t.type_id],y={id:t.game_id};_?l=P({name:`${_}`,params:y}):l=P({name:"games-id",params:y}),Z.push({path:l})},M=t=>{X(t),A(z.PROFILE_STATISTIC)},ce=t=>{ee(t),A(z.BET_INFO),Y("bet-active",t)},R=t=>+t.payout>=+t.bet_amount,ie=()=>{V.channel(`${U.transactionsCompany}.${B}`).listen(Se.leaderBoard,t=>{const[l]=Object.keys(t);if(t.casino){const _=t[l],{id:y,category:w}=_;if(!y)return;let v=-1;const h=p.value[w];v=h.findIndex(r=>r.id===y),v!==-1?Object.keys(_).forEach(r=>{h[v][r]=_[r]}):(h.length<10||h.pop(),h.unshift(_)),p.value[w].sort((r,s)=>new Date(s.time).getTime()-new Date(r.time).getTime())}else p.value[l]=t[l]})},le=t=>Be(t,F.value,se.value),de=t=>t&&t.length>J,ue=t=>`${R(t)||+t.payout==0?"":"-"}${T(C,t.payout)}`;return Te(()=>{oe(),ie()}),Ce(()=>{V.leaveChannel(`${U.transactionsCompany}.${B}`),clearInterval(O.value)}),(t,l)=>{const _=me,y=pe,w=he,v=Ae,h=Oe;return a(),o("div",je,[d("div",Ue,[N(t.$slots,"tabs",{activeTab:e(u),activeTabSetter:ae,tabs:g},()=>[e(i)?(a(),S(_,{key:0,"model-value":e(D),"item-list":g,"displayed-option":"label","returned-option":"key","additional-label":e(n)("leaderboard"),"default-option":e(D),"onUpdate:modelValue":l[0]||(l[0]=r=>u.value=r)},null,8,["model-value","additional-label","default-option"])):(a(),S(y,{key:1,modelValue:e(u),"onUpdate:modelValue":l[1]||(l[1]=r=>Ie(u)?u.value=r:null),tabs:g,type:"primary"},null,8,["modelValue"]))],!0),e(p)[e(u)].length?(a(),o("div",Ge,[I(h,{loading:e(x),class:"tw-w-full"},{default:G(()=>[d("div",Ke,[N(t.$slots,"header",{},()=>[d("div",{class:E(["fg-main-14-thin board-header",{"tw-grid-cols-2":e(i),"tw-grid-cols-6":!e(i)}])},[d("div",ze,c(e(n)("game")),1),e(i)?m("",!0):(a(),o("div",He,c(e(n)("user")),1)),e(i)?m("",!0):(a(),o("div",Je,c(e(n)("time")),1)),e(i)?m("",!0):(a(),o("div",We,c(e(n)("bet_amount")),1)),e(i)?m("",!0):(a(),o("div",Ye,c(e(n)("multiplier")),1)),d("div",Ze,c(e(n)("payout")),1)],2)],!0),N(t.$slots,"body",{items:e(p)[e(u)]},()=>[I(Ee,{name:"list",tag:"div",class:"board-body"},{default:G(()=>[(a(!0),o(k,null,K(Object.keys(e(p)),r=>(a(),o(k,{key:`${r}-transactions-array`},[r===e(u)?(a(),o(k,{key:0},[e(p)[r].length>0?(a(!0),o(k,{key:0},K(e(p)[r],(s,_e)=>(a(),o("div",{key:`${s.game}-${s.nickname}-${_e}`,class:E(["fg-main-14-thin board-row",{"tw-grid-cols-2":e(i),"tw-grid-cols-6":!e(i)}])},[d("div",{class:"tw-flex tw-items-center tw-cursor-pointer",onClick:$=>re(s)},[d("img",{alt:"category-icon",class:"board-row-icon",width:"16",height:"16",src:s.category_icon||ne(s)},null,8,Qe),d("span",Xe,c(s.game),1)],8,qe),e(i)?m("",!0):(a(),o("div",et,[de(s.username)?(a(),o("span",{key:0,class:"tw-cursor-pointer",onClick:$=>M(s)},c(s.username.substring(0,J)+"..."),9,tt)):s.username===""?(a(),o("span",{key:1,class:"board-row-name--anonymous ng-flex-center","data-tooltip":e(n)("enabled_privacy")},[I(v,{size:20,name:"anonymous"}),L(" "+c(e(n)("anonymous")),1)],8,st)):(a(),o("span",{key:2,class:"tw-cursor-pointer",onClick:$=>M(s)},c(s.username),9,at))])),e(i)?m("",!0):(a(),o("div",ot,[e(te)?(a(),o("span",nt,c(le(s.time)),1)):(a(),o("span",rt,c(e(Le)(s.time,{day:void 0,month:void 0,year:void 0})),1))])),e(i)?m("",!0):(a(),o("div",ct,[L(c(e(T)(C,s.bet_amount))+" ",1),d("img",{alt:"currency-icon",class:"tw-ml-[5px]",width:"17",height:"17",src:e(H)(s.currency)},null,8,it)])),e(i)?m("",!0):(a(),o("div",lt," x"+c(e(T)(C,s.multiplier.toFixed(2))),1)),d("div",{class:E(["board-row-currency",`board-row-currency--${R(s)?"more":"less"}`]),onClick:$=>ce(s)},[L(c(ue(s))+" ",1),d("img",{alt:"currency-icon",class:"tw-ml-[5px]",width:"17",height:"17",src:e(H)(s.currency)},null,8,ut)],10,dt)],2))),128)):m("",!0)],64)):m("",!0)],64))),128))]),_:1})],!0)])]),_:3},8,["loading"]),_t])):(a(),S(w,{key:0,"class-list":"tw-mt-4"}))])])}}}),wt=Fe(mt,[["__scopeId","data-v-fe16bbd9"]]);export{wt as _};
