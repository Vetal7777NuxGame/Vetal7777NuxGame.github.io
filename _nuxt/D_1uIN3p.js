import{U as vt,Z as ft,a7 as yt,i as r,k as gt,o as w,f as O,u as a,x as i,K as C,t as m,W as t,a as e,c as lt,T as ht,a5 as bt,_ as qt,V as zt,ab as wt,a0 as ct,j as q,p as Nt,b as Y,ac as Pt,ad as at,ae as dt,af as Rt,F as Ft,r as Dt,a3 as E,ag as jt,a4 as kt,ah as Ht,ai as Kt,a1 as Qt,$ as Wt}from"./GLBH15dL.js";import{_ as Yt}from"./BRNiVJfy.js";import{M as $t,C as z,_ as Ct,a as St}from"./CPHuSmoe.js";import{_ as Lt}from"./iGJpO4hG.js";import{_ as Zt}from"./CdeJWqbz.js";import{_ as Vt}from"./gfcTzQ0I.js";import{_ as Bt}from"./CpKgH15o.js";import{_ as xt}from"./DRArWz0C.js";import{_ as Jt}from"./B0IJO_Xd.js";import{_ as Xt}from"./CHFWnz7Z.js";import{_ as te}from"./DoW1pMUu.js";import{_ as ee}from"./Bwa_AFDR.js";import{_ as ae}from"./DjhTuyUU.js";import{_ as le}from"./YpR70fqq.js";import{F as ne}from"./sAv92ZWP.js";import{_ as Et}from"./C7PoV1zm.js";import{_ as oe}from"./CrctGWB-.js";import{g as se}from"./C1D4Ozuk.js";import{u as ie}from"./DCMfTZpQ.js";import"./CNKCMX-k.js";import"./D8aEg3BZ.js";import"./Cy95Qd2y.js";import"./D4Tfbifg.js";import"./DOMz106x.js";import"./DpuOAysh.js";import"./C9aiABHZ.js";import"./56Y_7FHu.js";import"./BOAzHGzj.js";import"./DQ9AOTKz.js";import"./Chmhkmtq.js";const re={class:"games-modal-content"},ue={key:0,class:"games-list"},ce=vt({__name:"ChooseGameBattleModal",emits:["close","getGame"],setup(Z,{emit:y}){const{t:V}=ft(),I=y,s=yt(),P=r(!0),G=r([]),H=r([]),R={type:$t.ACCORDION},tt=(u,f)=>{const k=[{value:"",text:V("all")},...Object.keys(u.category).map(b=>({value:b,text:u.category[Number(b)]}))],d=[{value:"",text:V("all")},...Object.keys(u.provider).map(b=>({value:b,text:u.provider[Number(b)]}))];H.value=[{target:"search",componentName:z.SEARCH_INPUT,props:{modelValue:""},mobile:{class:"tw-col-span-4"}},{target:"category",componentName:z.SINGLE_SELECTOR,props:{modelValue:"",additionalLabel:`${V("type")}: `,displayedOption:"text",returnedOption:"value",defaultOption:k[0],itemList:k,isAllowEmpty:!1},mobile:{redirect:!0}},{target:"provider",componentName:z.SINGLE_SELECTOR,props:{modelValue:"",additionalLabel:`${V("providers")}: `,displayedOption:"text",returnedOption:"value",defaultOption:d[0],itemList:d,isAllowEmpty:!1},mobile:{redirect:!0}},{target:"sort",componentName:z.SINGLE_SELECTOR,props:{modelValue:"",additionalLabel:`${V("sort_by")}: `,defaultOption:f[0],itemList:f,isAllowEmpty:!1},mobile:{redirect:!0}}]},S=async u=>{P.value=!0;try{const{data:f}=await s.fetchBattleGames(u);G.value=f.items}catch(f){console.log("onChangeFilter ChooseGameBattleModal.vue",f)}finally{setTimeout(()=>{P.value=!1},200)}};return gt(async()=>{try{const{data:u}=await s.fetchBattleGames();G.value=u.items,tt(u.filters,u.sort)}catch(u){console.log("onMounted ChooseGameBattleModal.vue",u)}finally{P.value=!1}}),(u,f)=>{const k=Ct,d=oe,b=Vt,x=Bt,N=xt,U=Et;return w(),O(ht,{to:"#globalModal"},[a(U,{"modal-max-width":"1024px","without-bg":"",onClose:f[0]||(f[0]=B=>I("close"))},{title:i(()=>[C(m(t(V)("select_slot_game")),1)]),content:i(()=>[a(N,{loading:t(P)},{default:i(()=>[e("div",re,[a(k,{"mobile-settings":R,list:t(H),class:"filters",onChange:S},null,8,["list"]),t(G).length?(w(),lt("div",ue,[a(b,{"key-name":"games-list",list:t(G),container:!1},{item:i(({item:B})=>[a(d,{game:B,size:"small","is-linkable":!1,onClick:M=>I("getGame",B)},null,8,["game","onClick"])]),_:1},8,["list"])])):(w(),O(x,{key:1}))])]),_:1},8,["loading"])]),_:1})])}}}),me=bt(ce,[["__scopeId","data-v-309ac309"]]),j=Z=>(Ht("data-v-83106b6d"),Z=Z(),Kt(),Z),pe={class:"input-item tw-mt-0"},_e={class:"tw-flex tw-items-center"},de=["src","alt"],ve={class:"tw-flex tw-flex-col"},fe={class:"ng-multiselect-label"},ye={class:"tw-text-text-tertiary tw-mr-[2px]"},ge={class:"tw-flex tw-items-center"},be=["src","alt"],xe={class:"tw-flex tw-flex-col"},he={class:"tw-text-text-tertiary tw-mr-[2px]"},we={class:"tooltip info"},Ne={class:"input-item"},ke={class:"input-item"},$e={class:"tw-flex tw-items-center"},Ce={class:"tw-flex tw-flex-col"},Se={class:"ng-multiselect-label"},Le={class:"tooltip info"},Ve={class:"input-item"},Be={class:"tooltip info"},Ee=j(()=>e("br",null,null,-1)),Oe=j(()=>e("br",null,null,-1)),Te={class:"input-item"},Ie={class:"tooltip info"},Ge={class:"input-item"},Ue={class:"tooltip info"},Me=j(()=>e("br",null,null,-1)),Ae=j(()=>e("br",null,null,-1)),qe={class:"input-item"},ze={class:"tooltip info"},Pe=j(()=>e("br",null,null,-1)),Re=j(()=>e("br",null,null,-1)),Fe={class:"input-item"},De={class:"tooltip info"},je=j(()=>e("br",null,null,-1)),He=j(()=>e("br",null,null,-1)),Ke={class:"tw-mt-6 tw-flex tw-justify-center"},Qe=vt({__name:"CreateBattleModal",emits:["close"],setup(Z,{emit:y}){const V=qt(),I=zt(),{t:s}=ft(),P=y,G=yt(),H=wt(),{getTiers:R,getBalance:tt}=ct(H);let S;const u=r(""),f=r(""),k=r(null),d=r(""),b=r(0),x=r(0),N=r(""),U=r(0),B=r(0),M=r(!1),K=r(!1),nt=r(!1),F=r([]),c=r({}),et=r(!0),Q=r([]),J=r(!1),v=q(()=>c.value.data.entry_fee_type.map(l=>({value:l,text:s(l.includes("points")?"points":"USD"),currency:l.includes("points")?"/img/GEM.png":se("USD"),balance:l.includes("points")?R.value.points:tt.value}))),p=q(()=>c.value.data.battle_type.map(l=>({value:l,text:s(l)}))),h=q(()=>{var l;return{balance_entry_fee:b.value,battle_entry_time:B.value,battle_type:d.value,entry_fee_type:u.value,game_id:((l=k.value)==null?void 0:l.game_id)??0,is_private:M.value,participant_count:U.value,spins_count:x.value,stake_amount:N.value}}),_=q(()=>c.value.data),$=q(()=>u.value.includes("points")),L=q(()=>$.value?"points":"USD"),g=q(()=>$.value?Number(c.value.data.points_entry_fee.min):Number(c.value.data.balance_entry_fee.min)),ot=q(()=>$.value?Number(c.value.data.points_entry_fee.max):Number(c.value.data.balance_entry_fee.max)),mt=()=>{it(),b.value=g.value},pt=l=>{var o;if(f.value=`${l.name} / ${l.soft}`,k.value=l,(o=l.pvp_data)!=null&&o.gameBattleAmount){Q.value=l.pvp_data.gameBattleAmount.map(A=>({value:A,text:`${A} ${s($.value?"points":"USD")}`}));const[X]=l.pvp_data.gameBattleAmount;N.value=X}K.value=!1},st=async()=>{try{const{data:l}=await G.createNewBattle(h.value);H.setUserBattle(l),V.push(I({name:"battles-lobby-id",params:{id:l.battle_link}}))}catch(l){F.value.push(l)}},_t=l=>{c.value=l,u.value=c.value.data.entry_fee_type[0],d.value=c.value.data.battle_type[0],b.value=Number(c.value.data.balance_entry_fee.min)??0,x.value=Number(c.value.data.spins_count.min)??0,U.value=Number(c.value.data.participant_range.min)??0,B.value=Number(c.value.data.battle_entry_time),it(),et.value=!1},it=()=>{const l=$.value?c.value.data.points_entry_fee:c.value.data.balance_entry_fee,o={min:c.value.data.min_battle_entry_time,max:c.value.data.battle_entry_time},X=c.value.data.participant_range,A=c.value.data.spins_count;S=Pt().shape({balance_entry_fee:at().min(+l.min).max(+l.max).required(),battle_entry_time:at().min(+o.min).max(+o.max).required(),battle_type:dt().required(),entry_fee_type:dt().required(),game_id:at().required(),is_private:Rt(),participant_count:at().min(+X.min).max(+X.max).required(),spins_count:at().min(+A.min).max(+A.max).required(),stake_amount:dt().required()})},T=()=>{var l;if(!((l=k.value)!=null&&l.game_id))return!1;S.validate(h.value).then(()=>{J.value=!0}).catch(()=>{J.value=!1})};return Nt(h,()=>{T()}),gt(async()=>{try{F.value=[];const{data:l}=await G.fetchCreateBattleSettings();_t(l),T()}catch(l){F.value.push(l),nt.value=!0,et.value=!1}}),(l,o)=>{const X=Xt,A=te,D=kt,W=ee,Ot=ae,rt=le,Tt=St,It=Lt,Gt=ne,Ut=xt,Mt=Et,At=me;return w(),lt("div",null,[(w(),O(ht,{to:"#globalModal"},[a(Mt,{"modal-max-width":"384px",class:"create-battle-modal",onClose:o[10]||(o[10]=n=>P("close"))},{title:i(()=>[C(m(t(s)("create_pvp_battle")),1)]),content:i(()=>[a(Ut,{loading:t(et)},{default:i(()=>[Object.keys(t(F)).length?(w(!0),lt(Ft,{key:0},Dt(t(F),n=>(w(),O(X,{key:n.error_code,error:n,validation:"",type:"message",class:"tw-mt-4 tw-mx-4"},null,8,["error"]))),128)):Y("",!0),t(nt)?Y("",!0):(w(),O(Gt,{key:1,class:"create-form",onSubmit:st},{default:i(()=>[e("div",pe,[a(A,{modelValue:t(u),"onUpdate:modelValue":o[0]||(o[0]=n=>E(u)?u.value=n:null),"default-option":t(v)[0],"returned-option":"value","item-list":t(v),onChange:mt},{"selected-option":i(({props:n})=>[e("div",_e,[e("img",{src:n.currency,alt:n.currency,width:"24",height:"24",class:"tw-mr-2"},null,8,de),e("div",ve,[e("span",fe,m(t(s)("balance")),1),e("span",null,[C(m(n.balance)+" ",1),e("span",ye,m(n.text),1)])])])]),option:i(({props:n})=>[e("div",ge,[e("img",{src:n.currency,alt:n.currency,width:"24",height:"24",class:"tw-mr-2"},null,8,be),e("div",xe,[e("span",null,[C(m(n.balance)+" ",1),e("span",he,m(n.text),1)])])])]),_:1},8,["modelValue","default-option","item-list"]),a(W,null,{content:i(()=>[e("div",we,m(t(s)("balance_select_tooltip")),1)]),target:i(()=>[a(D,{size:20,name:"info",class:"tw-text-text-tertiary"})]),_:1})]),e("div",Ne,[a(Ot,{modelValue:t(f),"onUpdate:modelValue":o[1]||(o[1]=n=>E(f)?f.value=n:null),"is-required":!0,"is-readonly":!0,"placeholder-text":l.$t("game"),"input-name":"game-id",class:"input-games",onClick:o[2]||(o[2]=n=>K.value=!0)},null,8,["modelValue","placeholder-text"])]),e("div",ke,[a(A,{modelValue:t(d),"onUpdate:modelValue":o[3]||(o[3]=n=>E(d)?d.value=n:null),"default-option":t(p)[0],"additional-label":t(s)("battle_type"),"returned-option":"value","displayed-option":"text","item-list":t(p)},{"selected-option":i(({props:n})=>[e("div",$e,[a(D,{name:n.value,folder:"pvp",size:24,class:"tw-text-text-tertiary tw-mr-2"},null,8,["name"]),e("div",Ce,[e("span",Se,m(t(s)("battle_type")),1),e("span",null,m(n.text),1)])])]),_:1},8,["modelValue","default-option","additional-label","item-list"]),a(W,null,{content:i(()=>[e("div",Le,m(t(s)("battle_type_tooltip")),1)]),target:i(()=>[a(D,{size:20,name:"info",class:"tw-text-text-tertiary"})]),_:1})]),e("div",Ve,[a(rt,{modelValue:t(b),"onUpdate:modelValue":o[4]||(o[4]=n=>E(b)?b.value=n:null),"is-required":!0,"placeholder-key":"jackpot_entry_price","suffix-key":t(L),min:+t(g),max:+t(ot),"input-name":"entry-price"},null,8,["modelValue","suffix-key","min","max"]),a(W,null,{content:i(()=>[e("div",Be,[C(m(t(s)("jackpot_entry_price_tooltip"))+" ",1),Ee,Oe,C(" "+m(t(s)("range"))+": "+m(t(g))+" "+m(t(L))+" - "+m(t(ot))+" "+m(t(L)),1)])]),target:i(()=>[a(D,{size:20,name:"info",class:"tw-text-text-tertiary"})]),_:1})]),e("div",Te,[a(A,{modelValue:t(N),"onUpdate:modelValue":o[5]||(o[5]=n=>E(N)?N.value=n:null),"default-option":t(Q)[0],"is-disabled":!t(Q).length,"returned-option":"value","displayed-option":"text","additional-label":t(s)("stake_amount"),placeholder:t(Q).length?t(s)("select_stake_amount"):t(s)("select_game"),"item-list":t(Q)},null,8,["modelValue","default-option","is-disabled","additional-label","placeholder","item-list"]),a(W,null,{content:i(()=>[e("div",Ie,m(t(s)("stake_amount_tooltip")),1)]),target:i(()=>[a(D,{size:20,name:"info",class:"tw-text-text-tertiary"})]),_:1})]),e("div",Ge,[a(rt,{modelValue:t(x),"onUpdate:modelValue":o[6]||(o[6]=n=>E(x)?x.value=n:null),"is-required":!0,min:+t(_).spins_count.min||0,max:+t(_).spins_count.max||0,"placeholder-key":"number_of_spins","input-name":"spins-number"},null,8,["modelValue","min","max"]),a(W,null,{content:i(()=>[e("div",Ue,[C(m(t(s)("number_of_spins_tooltip"))+" ",1),Me,Ae,C(" "+m(`${t(s)("range")}: ${t(_).spins_count.min} - ${t(_).spins_count.max}`),1)])]),target:i(()=>[a(D,{size:20,name:"info",class:"tw-text-text-tertiary"})]),_:1})]),e("div",qe,[a(rt,{modelValue:t(U),"onUpdate:modelValue":o[7]||(o[7]=n=>E(U)?U.value=n:null),"is-required":!0,min:+t(_).participant_range.min||0,max:+t(_).participant_range.max||0,"placeholder-key":"participants","input-name":"participants"},null,8,["modelValue","min","max"]),a(W,null,{content:i(()=>[e("div",ze,[C(m(t(s)("participants_tooltip"))+" ",1),Pe,Re,C(" "+m(`${t(s)("range")}: ${t(_).participant_range.min} - ${t(_).participant_range.max}`),1)])]),target:i(()=>[a(D,{size:20,name:"info",class:"tw-text-text-tertiary"})]),_:1})]),e("div",Fe,[a(rt,{modelValue:t(B),"onUpdate:modelValue":o[8]||(o[8]=n=>E(B)?B.value=n:null),"is-required":!0,min:+t(_).min_battle_entry_time||0,max:+t(_).battle_entry_time||0,"placeholder-key":"start_time","suffix-key":"min","input-name":"start-time"},null,8,["modelValue","min","max"]),a(W,null,{content:i(()=>[e("div",De,[C(m(t(s)("start_time_tooltip"))+" ",1),je,He,C(" "+m(`${t(s)("range")}: ${t(_).min_battle_entry_time} ${t(s)("minutes")} - ${t(_).battle_entry_time} ${t(s)("minutes")}`),1)])]),target:i(()=>[a(D,{size:20,name:"info",class:"tw-text-text-tertiary"})]),_:1})]),a(Tt,{modelValue:t(M),"onUpdate:modelValue":o[9]||(o[9]=n=>E(M)?M.value=n:null),"input-name":"tournament",name:"tournament","toggle-type":t(jt).check,class:"tw-mt-4","label-text":t(s)("private_tournament")},null,8,["modelValue","toggle-type","label-text"]),e("div",Ke,[a(It,{type:"submit","label-key":"create_match","is-disabled":!t(J)},null,8,["is-disabled"])])]),_:1}))]),_:1},8,["loading"])]),_:1})])),t(K)?(w(),O(At,{key:0,onClose:o[11]||(o[11]=n=>K.value=!1),onGetGame:pt})):Y("",!0)])}}}),We=bt(Qe,[["__scopeId","data-v-83106b6d"]]),Ye={class:"tw-mt-6 tw-pb-16 @tablet:tw-pb-10"},Ze={class:"tw-flex tw-items-center fg-title-20-fat"},Je={class:"battles-tabs"},Xe={key:0,class:"battles-list"},ut=300,ta=vt({__name:"index",setup(Z){ie({title:"PVP Battles"});const{t:y}=ft(),V=Qt(),{isLoggedIn:I}=ct(V),{switchUser:s}=V,P=Wt(),{isMultiBalance:G}=ct(P),H=wt(),{getUserBattle:R,getCurrency:tt}=ct(H),S=r(!0),u=r(!1),f=r(!1),k=r(!1),d=r(null),b=yt(),x=r("available"),N=r([]),U=[{key:"available",label:"available"},{key:"active",label:"active"},{key:"completed",label:"completed"}],B=q(()=>!S.value&&d.value&&N.value.length),M=r({}),K=r([]),nt={type:$t.ACCORDION},F=async v=>{S.value=!0,M.value=v;let p={status:x.value,...v};I.value&&(p={...p,my_battles:k.value}),await c(p),setTimeout(()=>{S.value=!1},ut)},c=async(v={},p=!1)=>{p&&(u.value=!0);const{data:h}=await b.fetchBattles(v);return p?N.value.push(...h.items):N.value=h.items,d.value=h.pagination,p&&setTimeout(()=>{u.value=!1},ut),h},et=({filters:v,sort:p})=>{const h=[{value:"",text:y("all")},...v.battle_types.map(g=>({value:g,text:y(g)}))],_=[{value:"",text:y("all")},...v.providers.map(g=>({value:g.id,text:g.name}))],$=[...p.map(g=>({key:g,text:y(g)}))],L=[{value:"",text:y("all")},...v.prize.map(g=>({value:g,text:y(g)}))];K.value=[{target:"q",componentName:z.SEARCH_INPUT,props:{modelValue:""}},{target:"battle_type",componentName:z.SINGLE_SELECTOR,props:{modelValue:"",additionalLabel:`${y("type")}: `,displayedOption:"text",returnedOption:"value",defaultOption:h[0],itemList:h,isAllowEmpty:!1},mobile:{redirect:!0}},{target:"provider",componentName:z.SINGLE_SELECTOR,props:{modelValue:"",additionalLabel:`${y("providers")}: `,displayedOption:"text",returnedOption:"value",defaultOption:_[0],itemList:_,isAllowEmpty:!1},mobile:{redirect:!0}},{target:"prize",componentName:z.SINGLE_SELECTOR,props:{modelValue:"",additionalLabel:`${y("prize")}: `,displayedOption:"text",returnedOption:"value",defaultOption:L[0],itemList:L,isAllowEmpty:!1},mobile:{redirect:!0}},{target:"sort",componentName:z.SINGLE_SELECTOR,props:{modelValue:"default",additionalLabel:`${y("sort_by")}: `,displayedOption:"text",returnedOption:"key",defaultOption:$[0],itemList:$,isAllowEmpty:!1},mobile:{redirect:!0}}]},Q=async()=>{var v;u.value=!0,await c({status:x.value,...M.value,page:(v=d.value)==null?void 0:v.next_page},!0),setTimeout(()=>{u.value=!1},ut)},J=async()=>{try{S.value=!0,await c({status:x.value,...M.value})}catch(v){console.error("updateList battles/index",v)}finally{S.value=!1}};return Nt(x,J),gt(async()=>{var h,_,$,L;const{filters:v,sort:p}=await c({status:x.value});et({filters:v,sort:p}),I.value&&G.value&&((h=R.value)==null?void 0:h.player_origin_currency)!==tt.value&&(((_=R.value)==null?void 0:_.battle_status)===1||(($=R.value)==null?void 0:$.battle_status)===2)&&s((L=R.value)==null?void 0:L.player_origin_currency),setTimeout(()=>{S.value=!1},ut)}),(v,p)=>{const h=kt,_=Yt,$=St,L=Lt,g=Ct,ot=Zt,mt=Vt,pt=Bt,st=xt,_t=Jt,it=We;return w(),lt("div",Ye,[e("h1",Ze,[a(h,{name:"pvp",size:24,class:"tw-text-input-fg tw-mr-2"}),C(" "+m(t(y)("battles")),1)]),e("div",Je,[a(_,{modelValue:t(x),"onUpdate:modelValue":p[0]||(p[0]=T=>E(x)?x.value=T:null),tabs:U,type:"primary"},null,8,["modelValue"]),t(I)?(w(),O($,{key:0,modelValue:t(k),"onUpdate:modelValue":p[1]||(p[1]=T=>E(k)?k.value=T:null),name:"is-my-battles","input-name":"myBattles","label-text":t(y)("show_my_battles"),"toggle-position":"right",class:"tw-ms-4 @tablet:tw-ms-0 @tablet:tw-mt-4",onChange:F},null,8,["modelValue","label-text"])):Y("",!0),t(I)?(w(),O(L,{key:1,"label-key":t(y)("create_battle"),class:"tw-ml-auto @tablet:tw-ml-0 @tablet:tw-w-full @tablet:tw-mt-4",size:"large",onClick:p[2]||(p[2]=T=>f.value=!0)},null,8,["label-key"])):Y("",!0)]),a(g,{"mobile-settings":nt,list:t(K),class:"filter-list",onChange:F},null,8,["list"]),a(st,{loading:t(S),class:"tw-mt-6"},{default:i(()=>[t(N).length?(w(),lt("div",Xe,[a(mt,{"key-name":"battles-list",list:t(N),container:!1},{item:i(({item:T})=>[a(ot,{item:T,onUpdateList:J},null,8,["item"])]),_:1},8,["list"])])):(w(),O(pt,{key:1}))]),_:1},8,["loading"]),t(B)&&t(d).next_page?(w(),O(_t,{key:0,item:{total:t(d).total,total_pages:t(d).total,page:t(d).per_page*t(d).page},"item-count":t(N).length,class:"tw-mt-8"},{action:i(()=>[a(st,{loading:t(u)},{default:i(()=>[a(L,{"label-key":"show_more","color-type":"outline",onClick:Q})]),_:1},8,["loading"])]),_:1},8,["item","item-count"])):Y("",!0),t(f)?(w(),O(it,{key:1,onClose:p[3]||(p[3]=T=>f.value=!1)})):Y("",!0)])}}}),Ea=bt(ta,[["__scopeId","data-v-0d74f61e"]]);export{Ea as default};
