import{a as de,_ as _e}from"./BaWeHPN9.js";import{_ as fe}from"./DjhTuyUU.js";import{E as pe}from"./j1r6YG1r.js";import{_ as ve}from"./YpR70fqq.js";import{a5 as ye,o,c as C,d as be,U as ge,ab as Ne,ax as ke,Z as $e,a0 as he,i as u,j as r,ad as we,p as xe,W as e,t as v,u as i,x as s,a3 as M,f as m,K as y,b as c,T as Ce,a9 as Pe,av as Se}from"./GLBH15dL.js";import{_ as Ve}from"./iGJpO4hG.js";import{F as Ae}from"./sAv92ZWP.js";import{_ as Fe}from"./C7PoV1zm.js";import{f as Ie}from"./C9aiABHZ.js";import"./DoW1pMUu.js";import"./D8aEg3BZ.js";import"./C1D4Ozuk.js";import"./BOAzHGzj.js";import"./DRArWz0C.js";import"./56Y_7FHu.js";const Me={},Te={class:"successfull-msg"};function Ee(T,P){return o(),C("div",Te,[be(T.$slots,"default",{},void 0,!0)])}const Ue=ye(Me,[["render",Ee],["__scopeId","data-v-cf171a7e"]]),Re={class:"payment-p2p"},Be={key:0,class:"agent-child"},De={key:1,class:"form-conatiner"},aa=ge({__name:"P2P",setup(T){const P=Ne(),O=ke(),{$2fa:E}=Pe(),{t:W}=$e(),{setP2PUserName:H}=P,{sendP2POrder:j}=O,{public:{PLATFORM_ID:z}}=Se(),{isAgentChild:K,getUser:Z,getPaymentP2P:S,getP2PUserName:G,getCurrencySymbol:U,getCurrency:J,getBalance:R,getWithdrawable:B}=he(P),h=u(!0),l=u(S.value.min_limit),d=u(""),b=u(""),g=u(""),n=u(""),N=u(!1),w=u(!0),V=u(!1),Q=r(()=>E.auth),X=r(()=>E.control),_=r({get:()=>G.value,set:a=>H(a)}),k=r(()=>Number(S.value.max_limit)),f=r(()=>Number(S.value.min_limit)),Y=r(()=>["6ed534e6-fe06-428f-b15f-e769cbbfe1c4","45cab422-ae18-45d9-acde-e0ddead0091a"].includes(z)),ee=r(()=>`${W("amount")} (${U.value} ${A(String(f.value))} - ${U.value} ${A(String(k.value))})`),ae=r(()=>!X.value.value&&Q.value.value),te=r(()=>we().typeError("").required().min(f.value).max(k.value)),oe=()=>{l.value=Number(R.value>k.value?k.value:R.value)},le=()=>{N.value&&n.value.length===6&&D()},D=async()=>{h.value=!0;try{const a={address:String(_.value),amount:l.value,code_2fa:n.value};await j(a),h.value=!1,N.value=!1,n.value="",V.value=!0}catch(a){const{message:t,error_code:F,msg:x}=a;t==="common.user_not_found"?b.value="user_not_found":t==="payment.withdrawal_wagering"?d.value="available_withdrawal_exceeded":t==="payment.not_enough_balance_operation"?d.value="current_amountexceeds":F===216?(N.value=!0,n.value=""):(g.value=x,n.value="")}},q=a=>{g.value="",V.value=!1,a==="player"&&(/[^a-z\d_@.-]/i.test(_.value)||_.value===Z.value?b.value="incorrect_emailuser":b.value=""),a==="amount"&&(Number(l.value)===0||Number(l.value)>k.value||Number(l.value)<f.value?d.value="amountMaxError":d.value=""),!b.value.length&&_.value.length&&!d.value.length&&l.value?h.value=!1:h.value=!0},ne=()=>{n.value.length<6?w.value=!0:w.value=!1},A=a=>Y.value?Ie(a):a,se=()=>{l.value=f.value};xe(()=>J.value,()=>{se()});const L=()=>{N.value=!1,n.value="",w.value=!0};return(a,t)=>{const F=de,x=fe,$=pe,ue=ve,re=_e,me=Ue,I=Ve,ie=Ae,ce=Fe;return o(),C("div",Re,[e(K)?(o(),C("div",Be,v(a.$t("agent_child")),1)):(o(),C("div",De,[i(F),i(ie,{id:"p2p-form",class:"tw-flex tw-flex-col tw-gap-4",onSubmit:D},{default:s(()=>[i(x,{modelValue:e(_),"onUpdate:modelValue":t[0]||(t[0]=p=>M(_)?_.value=p:null),"input-name":"playerName","placeholder-text":a.$t("username_or_email"),"is-required":"",onInput:t[1]||(t[1]=p=>q("player"))},null,8,["modelValue","placeholder-text"]),e(b)?(o(),m($,{key:0},{default:s(()=>[y(v(a.$t(e(b))),1)]),_:1})):c("",!0),i(ue,{modelValue:e(l),"onUpdate:modelValue":t[2]||(t[2]=p=>M(l)?l.value=p:null),modelModifiers:{number:!0},"input-name":"amount","placeholder-key":e(ee),"is-disabled":e(f)>e(B),"validation-rules":e(te),"is-max-btn":"","is-required":"",onInput:t[3]||(t[3]=p=>q("amount")),onClickMaxBtn:oe},null,8,["modelValue","placeholder-key","is-disabled","validation-rules"]),e(d)?(o(),m($,{key:1},{default:s(()=>[y(v(a.$t(e(d))),1)]),_:1})):c("",!0),e(f)>e(B)?(o(),m($,{key:2},{default:s(()=>[y(v(a.$t("amountMinErrorFull",{min:A(String(e(f)))})),1)]),_:1})):c("",!0),e(g)?(o(),m($,{key:3},{default:s(()=>[y(v(e(g)),1)]),_:1})):c("",!0),e(ae)?(o(),m(re,{key:4})):c("",!0),e(V)?(o(),m(me,{key:5},{default:s(()=>[y(v(a.$t("transfer_to_player_completed_successfully")),1)]),_:1})):c("",!0),i(I,{type:"submit",class:"tw-w-full","label-key":"send"})]),_:1})])),(o(),m(Ce,{to:"#globalModal"},[e(N)?(o(),m(ce,{key:0,class:"need-two-fa-modal","is-footer":"",onClose:L},{title:s(()=>[y(" Need 2fa code ")]),content:s(()=>[i(x,{modelValue:e(n),"onUpdate:modelValue":t[4]||(t[4]=p=>M(n)?n.value=p:null),"is-required":"","placeholder-text":a.$t("code"),onInput:ne},null,8,["modelValue","placeholder-text"]),e(g)?(o(),m($,{key:0},{default:s(()=>[y(v(e(g)),1)]),_:1})):c("",!0)]),footer:s(()=>[i(I,{"color-type":"secondary","label-key":"confirm","is-disabled":e(w),onClick:le},null,8,["is-disabled"]),i(I,{"color-type":"secondary","label-key":"cancel",onClick:L})]),_:1})):c("",!0)]))])}}});export{aa as default};
