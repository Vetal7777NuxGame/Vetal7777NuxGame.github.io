import{_ as j}from"./R1YRABMb.js";import{U as T,Z as q,o as l,c as $,a as i,d as P,K as H,t as v,n as E,W as y,f as W,x as S,b as A,av as B,u as R,V as Z,_ as J,$ as Q,a0 as X,i as w,S as Y,j as F,k as G,l as x,aB as m,aC as I,aD as ee,aE as M,aF as te,a9 as se,M as ae,m as ne,y as oe,aG as re,F as ie,r as ce,a5 as le}from"./DSD2pUNw.js";import{_ as ue}from"./D8Vkugs4.js";import{f as me}from"./BLR1aNLP.js";import{g as de}from"./DiADfKRX.js";var d=(t=>(t.month="30",t.week="7",t.day="1",t))(d||{});const k="none";var f=(t=>(t[t.large=14]="large",t[t.medium=10]="medium",t[t.mediumMin=8]="mediumMin",t[t.small=6]="small",t[t.smallExtra=4]="smallExtra",t))(f||{});const _e={class:"control-panel"},pe=["onClick"],fe=T({__name:"LiveWinsControlPanel",props:{currentFilter:{},filterList:{}},emits:["filter"],setup(t){const{t:c}=q(),u=s=>{switch(s){case d.month:return c("month_m");case d.week:return c("week_w");case d.day:return c("day_d")}};return(s,a)=>{const o=j;return l(),$("header",_e,[i("button",{class:E(["none-filter-button",{active:s.currentFilter===y(k)}]),onClick:a[0]||(a[0]=e=>s.$emit("filter",y(k)))},[P(s.$slots,"header-ico"),H(" "+v(s.$t("live_wins")),1)],2),s.filterList?(l(),W(o,{key:0,list:s.filterList,"key-name":"wins-filter",class:"filter-list"},{item:S(({item:e})=>[i("button",{class:E(["filter-button",{active:s.currentFilter===e}]),onClick:g=>s.$emit("filter",e)},v(u(e)),11,pe)]),_:1},8,["list"])):A("",!0)])}}}),ve={class:"game-item"},ge={class:"game-content"},he={class:"game-payout"},$e={class:"game-amount"},ke=["src"],ye={class:"nickname"},Le=T({__name:"LiveWinsItem",props:{item:{}},setup(t){const c=t,{PLATFORM_ID:u}=B().public,s=a=>["8dfa5f04-fa62-4634-a170-d65019070b5f","6ed534e6-fe06-428f-b15f-e769cbbfe1c4","45cab422-ae18-45d9-acde-e0ddead0091a"].includes(u)?me(a):a;return(a,o)=>{const e=ue;return l(),$("div",ve,[R(e,{alt:a.item.game,src:c.item.banner_vertical,class:"tw-object-cover game-image"},null,8,["alt","src"]),i("div",ge,[i("div",he,[i("div",$e,v(s(a.item.amount)),1),i("img",{class:"payout-icon",src:y(de)(a.item.currency),alt:""},null,8,ke)]),i("div",ye,v(a.item.nickname),1)])])}}}),be=()=>{const t=Z(),c=J(),u=Q(),{$echo:s}=se(),{PLATFORM_ID:a}=B().public,{getContainerWidth:o}=X(u),e=w([]),g=w(!1),h=w(k),_=Y({error_code:0,status:!0,msg:""}),r=F(()=>o.value>=m.desktopLarge?f.large:o.value>=m.desktop&&o.value<=m.desktopLarge?f.medium:o.value>=m.tablet&&o.value<=m.desktop?f.mediumMin:o.value>=m.mobileLarge&&o.value<=m.tablet?f.small:f.smallExtra),L=F(()=>e.value.slice(0,r.value)??[]),b=n=>{const{msg:p="Wrong request LiveWins",status:V,error_code:K=0}=n;_.msg=p,_.status=V,_.error_code=K},N=async()=>{try{const n=await I.wins.getLiveWins();e.value=n}catch(n){b(n),console.error("useLiveWins.ts -> fetchLiveWins",n)}},C=async n=>{try{const p=await I.wins.getTopWins({filter:n});e.value=p}catch(p){b(p),console.error("useLiveWins.ts -> fetchTopWins",p)}},z=async n=>{switch(h.value=n,g.value=!0,n){case k:await N();break;case d.day:case d.month:case d.week:await C(n);break;default:console.error("Type of filter is not defined")}g.value=!1},O=n=>{c.push(t({name:ee.games_id,params:{id:n.game_id}}))},D=()=>{s.channel(`${M.liveTransactionsCompany}.${a}`).listen(te.liveWins,n=>{h.value===k&&(e.value=[n.liveWins,...e.value])})},U=()=>s.leaveChannel(`${M.liveTransactionsCompany}.${a}`);return G(()=>D()),x(()=>U()),{fetchTopWins:C,fetchLiveWins:N,gridSize:r,list:e,onFilter:z,onGoTo:O,slicedList:L,loading:g,filter:h,errorStatus:_}},we={key:0,class:"ng-live-wins"},We={class:"content-container"},Se={key:1,class:"empty-result"},Te=T({__name:"LiveWins",props:{filterList:{},currentFilter:{},list:{},gridSize:{}},emits:["update","go-to"],setup(t,{emit:c}){const{errorStatus:u}=be(),s=t,a=c,o=e=>{s.currentFilter!==e&&a("update",e)};return ae(()=>a("update",s.currentFilter)),(e,g)=>{const h=fe,_=Le;return y(u).status?(l(),$("div",we,[R(h,ne({currentFilter:e.currentFilter,filterList:[...new Set(e.filterList)]},{onFilter:o}),{"header-ico":S(()=>[P(e.$slots,"header-icon",{},void 0,!0)]),_:3},16),i("div",We,[e.list.length?(l(),W(re,{key:0,name:"list",tag:"div",class:"wins-grid tw-grid",style:oe({gridTemplateColumns:`repeat(${e.gridSize}, minmax(0, 1fr))`})},{default:S(()=>[(l(!0),$(ie,null,ce(e.list,(r,L)=>(l(),W(_,{key:`${r.game_id}-${L}-${r.game}-${r.nickname}-${r.amount}-${r.currency}`,item:r,onClick:b=>e.$emit("go-to",r)},null,8,["item","onClick"]))),128))]),_:1},8,["style"])):(l(),$("div",Se,[i("p",null,v(e.$t("no_results_yet")),1),i("p",null,v(e.$t("be_first_winner")),1)]))])])):A("",!0)}}}),Me=le(Te,[["__scopeId","data-v-93cac349"]]);export{d as L,Me as _,be as u};
