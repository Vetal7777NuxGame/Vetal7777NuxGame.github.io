import{$ as K,a0 as ne,j as _,aB as n,U as re,a6 as Z,o as C,c as H,u as x,x as W,W as ie,f as z,b as le,a5 as ce,V as ue,_ as pe,Z as me,am as de,i as m,p as ge,bm as ye}from"./DSD2pUNw.js";import{_ as fe}from"./ChUyVPeQ.js";import{_ as _e}from"./R1YRABMb.js";import{_ as ve}from"./Dq3GPOqN.js";import{_ as be}from"./rnzwH3QY.js";import{_ as he}from"./D8SE-IQr.js";import{u as ke}from"./IW4IgeV-.js";import{M as Le,C as f}from"./BcNY68dZ.js";const xe=()=>{const y=K(),{containerWidth:r}=ne(y),o=_(()=>({xs:r.value>n.mobileSmall&&r.value<n.mobile,sm:r.value>n.mobile&&r.value<n.tablet,md:r.value>n.tablet&&r.value<n.desktop,lg:r.value>n.desktop})),i=_(()=>({mobileSmall:n.mobileSmall,mobile:n.mobile-32,mobileLarge:n.mobileLarge,tablet:n.tablet-32,desktop:n.desktop-32,desktopLarge:n.desktopLarge-32}));return{containerGridCols:o,updateBreakpoints:i}},Ce={key:0},Ne=re({__name:"GamesProviders",props:{games:{},providers:{},pagination:{},moreLink:{}},emits:["pagination"],setup(y,{emit:r}){const o=y,i=Z(),v=_(()=>o.moreLink?o.moreLink:i.path.replace(/\/$/,"")),u=r;return(l,b)=>{const N=fe,S=_e,P=ve,E=be,G=he;return C(),H("div",null,[l.games.length?(C(),H("section",Ce,[x(S,{list:l.games,class:"ng-list-grid","key-name":"live-casino-items","key-identify":"game_id"},{item:W(({item:h})=>[x(N,{game:h,"page-path":ie(v)},null,8,["game","page-path"])]),_:1},8,["list"]),l.pagination.next_page?(C(),z(E,{key:0,"class-list":"tw-my-8","item-count":l.games.length,item:l.pagination},{action:W(()=>[x(P,{"label-key":l.$t("show_more"),"color-type":"outline",class:"content-btn",onClick:b[0]||(b[0]=h=>u("pagination",l.pagination.next_page))},null,8,["label-key"])]),_:1},8,["item-count","item"])):le("",!0)])):(C(),z(G,{key:1}))])}}}),$e=ce(Ne,[["__scopeId","data-v-bddc4416"]]),Re=()=>{const y=ue(),r=pe(),o=Z(),{t:i}=me(),v=K(),{globalData:u}=v,{findCustomId:l,checkRouteType:b}=ke(),{fetchSpins:N,fetchVirtuals:S,fetchTableGames:P,fetchLiveGames:E,fetchPoker:G,fetchCrypto:h,fetchTvGames:J}=de(),$=m(null),R=m([]),V=m([]),q=m({category:{},provider:{}}),B=m([]),D=m(!0),k={val:0,text:i("all")},A={1:["live","/live-games"],2:["spins","/games"],3:["virtuals","/virtual-sport"],5:["poker","/poker"],8:["crypto","/special-games"],9:["table","/table-games"],10:["tv","/tv-games"]},X={1:E,2:N,3:S,5:G,8:h,9:P,10:J},d=_(()=>({sort:"rating",per_page:42})),p=m({...o.query,...d.value}),j=_(()=>{for(const[e,t]of Object.entries(A)){const[a,s]=t,c=y(s);if(o.path.includes(c)||a.includes(o.query.tab))return X[parseInt(e)]}return null}),F=async()=>{if(typeof j.value!="function")return;const e=w(p.value);try{const{data:t}=await j.value(M(e));$.value=t.pagination,R.value=t.items,q.value=t.filters,B.value=t.sort,Q(t.filters,t.sort)}catch(t){console.error("getGamesData -> useCasinoDefaultGame",t)}finally{D.value=!1}},O=e=>{var c,g;const t=(c=o.query)==null?void 0:c.tab,a=w({tab:t,...d.value,...e});((g=o.query)==null?void 0:g.category)&&Number(e.category)!==Number(o.query.category)&&a.provider&&delete a.provider,r.replace({query:a}),p.value=a},Y=ye(e=>{O(e)}),ee=()=>{const e={...p.value,per_page:Number(p.value.per_page)+Number(d.value.per_page)};O(e)};ge(()=>o.query,async()=>{p.value={...p.value,...o.query},await F()});const te=e=>e===o.query.tab||o.path.includes(e)?{...o.query,...d.value}:{...d.value},ae={type:Le.ACCORDION,style:{accordionContainerClass:"tw-flex tw-flex-col tw-gap-2"}},M=e=>{if(e!=null&&e.custom_category){const t=l(e.custom_category);e.custom_category=t}return e},w=e=>{const t={...e};return u.casino_categories.forEach(a=>{var s;a!=null&&a.id&&typeof(e==null?void 0:e.category)=="string"&&((s=e==null?void 0:e.category)!=null&&s.includes(a.id.toString()))&&(delete t.category,t.custom_category=a.name)}),t},I=e=>Object.entries(e).map(([t,a])=>({text:i(a),val:parseInt(t),key:a})),oe=e=>{var a;const t=[];return(a=u==null?void 0:u.casino_categories)!=null&&a.length&&u.casino_categories.forEach(s=>{s!=null&&s.id&&Object.keys(e).includes(s.id.toString())&&b(s.type)&&t.push({text:i(s.name),val:`custom_${s.id}`,key:s.name})}),t},se=e=>{const t=I(e.provider);return{list:[k,...t],default:t.find(a=>a.val===Number(o.query.provider))||k}},Q=(e,t)=>{var U;const a=[...I(e.category),...oe(e.custom_category)],s=I(t),c={list:[k,...a],default:a.find(L=>L.val===Number(o.query.category)||L.key===o.query.custom_category)||k},g=se(e),T={list:s,default:s.find(L=>L.key===o.query.sort)||s[0]};V.value=[{target:"search",componentName:f.SEARCH_INPUT,props:{classes:"tw-col-span-2",modelValue:((U=o.query)==null?void 0:U.search)||"",placeholderText:i("search"),isRequired:!0},mobile:{class:"tw-col-span-6"},leftIcon:{name:"search",size:20}},{componentName:f.SINGLE_SELECTOR,target:"category",props:{additionalLabel:`${i("category")}: `,displayedOption:"text",returnedOption:"val",defaultOption:c.default,itemList:c.list,isAllowEmpty:!1,isSearchable:!0,modelValue:c.default.val||""},mobile:{redirect:!0}},{componentName:f.SINGLE_SELECTOR,target:"provider",props:{additionalLabel:`${i("providers")}: `,displayedOption:"text",returnedOption:"val",defaultOption:g.default,itemList:g.list,isAllowEmpty:!1,isSearchable:!0,modelValue:g.default.val||""},mobile:{redirect:!0}},{componentName:f.SINGLE_SELECTOR,target:"sort",props:{additionalLabel:`${i("sort_by")}: `,displayedOption:"text",returnedOption:"key",defaultOption:T.default,itemList:T.list,isAllowEmpty:!1,modelValue:T.default.key||""},mobile:{redirect:!0}},{componentName:f.TOGGLER_INPUT,target:"bonus_buy",props:{classes:"tw-max-h-12",labelKey:"bonus_buy",isLabelShown:!0,modelValue:!!o.query.bonus_buy||!1},mobile:{redirect:!0}}]};return{gamesPaginationItem:$,gamesListItem:R,filtersItems:q,sortItems:B,params:p,isGameLoading:D,filterList:V,defaultParams:d,mobileSettings:ae,pages:A,getQueryParams:te,setFilters:Q,checkPayload:w,changeCasinoQuery:M,getGamesData:F,updateFilter:O,searchHandler:Y,updatePerPage:ee}};export{$e as _,Re as a,xe as u};
